//= depend_on_asset "upload/upload.html"
"use strict";
angular
  .module('sampler.upload', [
    'ui.router',
    'flow'
  ])
  .config(function($stateProvider) {
    [
      {
        name: "root.upload",
        url: "/upload",
        templateUrl: "<%= asset_path('upload/upload.html') %>",
        controller: 'Upload'
      }
    ].forEach(function(state) {
      $stateProvider.state(state);
    });
  })
  .controller(
    'Upload',
    function(
      $state,
      $scope,
      Authentication) {
      $scope.base_url = Authentication.getUrl() + '/api/upload';
      console.log($scope.base_url);

      $scope.flow_setup = function() {
        return {
          target: $scope.base_url,
          withCredentials: true
        };
      };
    });
